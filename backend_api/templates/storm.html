{% extends "layout.html" %}
{% block title %}Dự báo Bão - Dự báo Thời tiết{% endblock %}

{% block content %}
<section id="page-storm" class="bg-gradient-to-br from-[#87CEEB] via-[#AFD7E0] to-[#E6F0FA] dark:from-gray-800 dark:to-gray-900 min-h-screen py-8 animate-gradient">
    <h1 class="text-3xl font-bold text-gray-800 dark:text-white mb-6 animate-fade-in">Theo dõi Bão trên Biển Đông</h1>
    
    <div class="bg-white/90 dark:bg-gray-800/90 rounded-lg shadow-xl p-4 weather-card animate-pop-in">
        <div id="map-container" class="bg-[#E6F0FA] dark:bg-gray-700 rounded-lg" style="height: 60vh; border: 2px solid #AFD7E0; transition: all 0.3s ease;"></div>
    </div>
    
    <div class="mt-4 p-4 bg-[#AFD7E0] dark:bg-gray-700 border border-[#E6F0FA] dark:border-gray-600 text-gray-800 dark:text-white rounded-lg animate-slide-up">
        <h3 class="font-bold text-lg mb-2">Ghi chú Phát triển</h3>
        <p>Bản đồ này đang hiển thị dữ liệu từ <strong>/api/storm_track</strong>. 
        <br>Hiện tại API này đang gọi mô hình ML ví dụ (LinearRegression) và trả về dữ liệu bão giả.
        </p>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', () => {
        if (typeof initStormMap === 'function') {
            initStormMap();
        }
    });
    function initStormMap() {
        const map = L.map('map-container').setView([10.7769, 106.7009], 5);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
        }).addTo(map);
        L.marker([12.0, 109.0]).addTo(map).bindPopup('<b>Vị trí bão</b><br>Cấp 8').openPopup();
        L.polyline([[12.0, 109.0], [13.0, 110.0]], {color: '#FADBD8', dashArray: '5, 5', weight: 3}).addTo(map);
    }
</script>
{% endblock %}